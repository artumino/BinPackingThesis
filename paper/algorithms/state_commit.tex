\begin{algorithm}[H] \label{algo:state_commit}
    \DontPrintSemicolon
    \SetAlgoLined
    \SetKwInOut{Input}{input}
    \SetKwInOut{Output}{output}
    \Input{$s$}
    \Output{$s$}
    \ForAll{$(b, I) \in s.P$}{
        \If{$b \in s.B$}{
            $s.s_b.J \gets s.s_b.J \cup I$\;
            $s.U \gets s.U \setminus I$\;
        }
        \Else(Open a new bin){
            $s.B \gets s.B \cup b$\;
            $s.s_b \gets OpenBin(b)$\;
        }
    }
    $s.P \gets \emptyset$\;
    \Return{$s$}
    \caption{Commit}
\end{algorithm}