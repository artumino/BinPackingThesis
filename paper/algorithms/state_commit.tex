\begin{algorithm}[htbp]
    \DontPrintSemicolon
    \SetAlgoLined
    \SetKwInOut{Input}{input}
    \SetKwInOut{Output}{output}
    \Input{$s$}
    \Output{$s^\prime$}
    $(b, I) \gets s.p$\;
    $s^\prime \gets Clone(s)$\CommentSty{ //Memory clone of $s$}\;
    \If{$b \in s^\prime.B$}{
        $q_b \gets (q_i \in s^\prime.Q : i = b)$\;
        $q_b.J \gets q_b.J \cup I$\;
        $s^\prime.U \gets s^\prime.U \setminus I$\;
    }
    \Else(Open a new bin){
        $s^\prime.B \gets s^\prime.B \cup b$\;
        $s^\prime.Q \gets s^\prime.Q \cup OpenBin(b)$\;
    }
    $s^\prime.p \gets \text{none}$\;
    \Return{$s^\prime$}
    \caption{Commit \label{algo:state_commit}}
\end{algorithm}