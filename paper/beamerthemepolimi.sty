% Pasquale Africa <pasqualeclaudio.africa@polimi.it>
% Beamer port of the official PoliMi presentation theme.

\mode<all>

\newif\if@bgphoto
\@bgphotofalse
\DeclareOption{bgphoto}{\@bgphototrue}

\newif\if@nologo
\@nologofalse
\DeclareOption{nologo}{\@nologotrue}
\ProcessOptions

\RequirePackage{tikz}
\usetikzlibrary{calc}
\graphicspath{{beamerthemepolimi_img/}}

\RequirePackage{etoolbox} % \patchcmd

\useinnertheme{polimi}
\useoutertheme{polimi}
\usecolortheme{polimi}

\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{blocks}[rounded][shadow=true]
\setbeamertemplate{itemize items}[square]
\setbeamertemplate{itemize subitem}[triangle]

% Set margins.
\setbeamersize{text margin left=\xshift, text margin right=\xshift}
\setlength{\leftmargini}{\xshift}

\let\oldtoc\tableofcontents
\renewcommand{\tableofcontents}[1][]{%
    \begin{columns}[onlytextwidth,T]
        \column{\dimexpr\linewidth-25mm-5mm}
        \hspace*{0.5\xshift}
        \begin{minipage}{\textwidth}
            \centering
            \oldtoc[#1]
        \end{minipage}

        \column{25mm}
        \hspace*{-40mm}
        \includegraphics[width=50mm]{Images/presentation/realworld_pallettization.jpg}
    \end{columns}
}
