\begin{algorithm}[H] \label{algo:sp_bestinsertion}
    \DontPrintSemicolon
    \SetAlgoLined
    \SetKwInOut{Input}{input}
    \SetKwInOut{Output}{output}
    \Input{$s_b, I$}
    \Output{$placement$}
    $placement \leftarrow \emptyset$\;
    \ForAll{$S_z \in planes$}{
        $I_p \leftarrow I \setminus \{\forall i \in I : z + i.h > H_b \}$\;
        \ForAll{$change \in coords$}{
            $I^\prime_{upper} \leftarrow CoordinateChange(change, I_{upper})$\;
            $I^\prime_{p} \leftarrow CoordinateChange(change, I_{p})$\;
            $p^\prime \leftarrow SPRectanglePackingWithObstacles(W_b, D_b, I^\prime_{upper}, I^\prime_{p})$\;
            $p \leftarrow CoordinateChange(change, p^\prime)$\;
        
            $p \leftarrow \{\forall i \in p : IsFeasible(i, bin, I_{support}, I_{upper}, aabb)\}$\;

            \If{$ComparePacking(placement, p)$}{
                $placement \leftarrow p$\;
            }
        }
        \If{$placement \neq \emptyset$}{
            \Return{$placement$}
        }
    }
    \Return{$placement$}
    \caption{SP Best Insertion}
\end{algorithm}